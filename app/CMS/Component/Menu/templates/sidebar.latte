{var collapseId = uniqid('panel-collapse-')}
<div class="component-menu-sidebar">
    <div class="panel panel-primary panel-{$group}">
        <div class="panel-heading clearfix">
            <span class="panel-title">
                <a href="{plink $home->link,id=>$home->link_id}">
                    {$home->title}
                </a>
            </span>
            <button class="btn btn-xs btn-default pull-right visible-xs" href="#" data-toggle="collapse" data-target=".{$collapseId}">
                Toggle <i class="icon-caret-down"></i>
            </button>
        </div>
        <div class="list-group">
            <div class="collapse in panel-collapse {$collapseId}" n:inner-foreach="$tree as $node">
                <a n:class="isset($breadcrumb[$node->data->id])?active,list-group-item" href="{plink $node->data->link,id=>$node->data->link_id}">
                    {$node->data->title}
                </a>
                {if count($node->children) AND isset($breadcrumb[$node->data->id])}
                    {include #nav,tree=>$node->children}
                {/if}
            </div>
        </div>
    </div>
    {define #nav}
    <ul n:inner-foreach="$tree as $node">
        <li n:class="isset($breadcrumb[$node->data->id])?active">
            <a href="{plink $node->data->link,id=>$node->data->link_id}">
                {$node->data->title}
            </a>
            {if count($node->children) AND isset($breadcrumb[$node->data->id])}
                {include #nav,tree=>$node->children}
            {/if}
        </li>
    </ul>
    {/define}
</div>